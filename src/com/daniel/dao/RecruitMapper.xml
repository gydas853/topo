<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.daniel.dao.RecruitMapper">

    <resultMap id="r_cMap" type="com.daniel.model.Recruit">
        <id property="r_id" column="r_id"/>
        <result property="r_name" column="r_name"/>
        <result property="r_money" column="r_money"/>
        <result property="r_c_id" column="r_c_id"/>
        <association property="company" javaType="com.daniel.model.Company">
            <id property="c_id" column="c_id"/>
            <result property="c_name" column="c_name"/>
            <result property="c_companyScale" column="c_companyScale"/>
            <result property="c_summary" column="c_summary"/>
            <result property="c_address" column="c_address"/>
            <result property="c_phone" column="c_phone"/>
            <result property="c_d_id" column="c_d_id"/>
        </association>
    </resultMap>

    <insert id="addRecruit">
        insert into recruit (r_name, r_c_id, r_d_id, r_p_id,r_money)
        values (#{r_name},#{r_c_id},#{r_d_id},#{r_p_id},#{r_money});
    </insert>

    <update id="updateRecruit">
        update recruit
        set r_name = #{r_name},r_c_id = #{r_c_id},r_d_id = #{r_d_id},r_p_id = #{r_p_id},r_money = #{r_money}
        where r_id = #{r_id};
    </update>

    <delete id="deleteRecruit">
        delete from recruit where r_id = #{r_id};
    </delete>

    <select id="listAll" resultMap="r_cMap">
        select * from recruit,company where r_c_id = c_id;
    </select>

    <select id="getRecruitByR_id" resultMap="r_cMap">
        select * from recruit,company where r_c_id = c_id and r_id = #{r_id};
    </select>
</mapper>